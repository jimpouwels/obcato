<?php	// No direct access	defined('_ACCESS') or die;		require_once "libraries/system/template_engine.php";	require_once "core/visual/form_textfield.php";	require_once "dao/image_dao.php";		class ImageEditor extends Visual {			private static $TEMPLATE = "images/images/image_editor.tpl";			private $_template_engine;		private $_current_image;		private $_image_dao;			public function __construct($current_image) {			$this->_current_image = $current_image;			$this->_image_dao = ImageDao::getInstance();			$this->_template_engine = TemplateEngine::getInstance();		}			public function render() {			$this->assignElementHolderFormIds();			$this->_template_engine->assign("block_metadata", $this->renderImageMetaData());						return $this->_template_engine->fetch(self::$TEMPLATE);		}				private function renderImageMetaData() {			$title_field = new TextField("title", "Titel", $this->_current_image->getTitle(), true, false, null);			$published_field = new SingleCheckbox("published", "Gepubliceerd", $this->_current_image->isPublished(), false, null);									$this->_template_engine->assign("title_field", $title_field->render());			$this->_template_engine->assign("published_field", $published_field->render());			$this->_template_engine->assign("template_picker_field", $template_picker_field->render());			$this->_template_engine->assign("positions_field", $this->renderPositionsField());			return $this->_template_engine->fetch(self::$BLOCK_METADATA_TEMPLATE);		}				private function getPublicationDateValue($publication_date) {			return DateUtility::mysqlDateToString($this->_current_block->getPublicationDate(), '-');		}				private function assignElementHolderFormIds() {			$this->_template_engine->assign("edit_element_holder_id", EDIT_ELEMENT_HOLDER_ID);			$this->_template_engine->assign("element_holder_form_id", ELEMENT_HOLDER_FORM_ID);			$this->_template_engine->assign("action_form_id", ACTION_FORM_ID);			$this->_template_engine->assign("delete_element_form_id", DELETE_ELEMENT_FORM_ID);		}		}	?>