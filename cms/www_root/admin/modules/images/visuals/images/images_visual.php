<?php	// No direct access	defined('_ACCESS') or die;		require_once "core/visual/form_checkbox_single.php";	require_once "libraries/system/template_engine.php";	require_once "modules/images/visuals/images/image_search.php";	require_once "modules/images/visuals/images/image_list.php";	require_once "modules/images/visuals/images/image_editor.php";		class ImagesVisual extends Visual {			private static $TEMPLATE = "images/images/images.tpl";			private $_template_engine;		private $_current_image;			public function __construct($current_image) {			$this->_current_image = $current_image;			$this->_template_engine = TemplateEngine::getInstance();		}			public function render() {			$this->_template_engine->assign("search", $this->renderImageSearch());			if (!is_null($this->_current_image)) {				$this->_template_engine->assign("editor", $this->renderImageEditor());			} else {				$this->_template_engine->assign("images_list", $this->renderImageList());			}					return $this->_template_engine->fetch("modules/" . self::$TEMPLATE);		}				private function renderImageSearch() {			$image_search = new ImageSearch();			return $image_search->render();		}				private function renderImageList() {			$images_list = new ImageList($this->_current_image);			return $images_list->render();		}				private function renderImageEditor() {			$image_editor = new ImageEditor($this->_current_image);			return $image_editor->render();		}		}	?>